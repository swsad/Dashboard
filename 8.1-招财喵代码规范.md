# 招财喵代码规范

## 前端代码规范

> 前端补充

## 云后台规范

### 云接口实现规范

#### 1. 函数注释

在云接口开头的地方，写上云接口的功能，接受的参数及其类型，返回的对象及其代表的意义。例如：

```javascript
/*
 功能：添加用户基本信息
 接受参数：
 user_type: num 表示用户类型
 user_info: object  用户或组织的所有信息
 返回情况：
 {
   success: bool
   error: object  系统内部错误
 }
*/
```

#### 2. 返回值

云接口返回的对象有：

1. `success：bool`表达这次调用云接口是否成功；
2. `error：object`表示云函数调用发生的错误（如有），可能是库调用的错误，也可能是逻辑上主动`throw`的错误；
3. 还有一些该接口特有的其他前端需要知道的返回值。

#### 3. 异常处理

云接口统一采用`try throw catch`的方式来处理异常，抛出的异常放入返回对象的error字段中。

```javascript
try{
	// 接口实现
} catch(err) {
    return {
      success: false,
      error: err
    }
}
```

#### 3. 日志

云接口执行过程中，实时将运行情况输出到日志中，分为三种log信息：

1. `[参数]: xxx` 记录进入云接口时输入的参数
2. `[完成]: xxx`记录云接口返回时完成的操作，云接口可能有多处返回点，这样方便得知从哪个返回点退出。
3. `[错误]: xxx` 记录云函数出错的信息。

### JS规范

#### 1. 变量声明规范

声明可变变量名必须加上`var`关键字，声明常量变量名必须加上`const`关键字。

> 当你没有写 var, 变量就会暴露在全局上下文中, 这样很可能会和现有变量冲突. 另外, 如果没有加上, 很难明确该变量的作用域是什么。 

云接口命名：采用`verb_noun`的形式，`send_verification`，代表发送验证邮箱。

常量命名：采用全大写的形式，如`UPPERBOUNDERCODE`。

#### 2. 注释

多行注释使用`/**/`, 注释使用空格缩进，如：

```javascript
/*
 功能：xxx
*/
```

单行注释使用`//`

- 注释文字与`//`保留一个空格。
- 在代码之后添加注释，`//`与代码之间保留一个空格